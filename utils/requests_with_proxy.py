from typing import Dict
from random import choice

import requests


list_of_proxies = [
    "51.222.12.245:10084",
    "184.95.235.194:1080",
    "159.223.173.147:27188",
    "172.104.20.199:7497",
    "165.22.6.221:7497",
    "209.159.153.19:58426",
    "66.23.233.210:59258",
    "209.159.153.20:44999",
    "5.161.86.206:1080",
    "51.222.13.193:10084",
    "67.210.146.50:11080",
    "38.91.106.252:17301",
    "66.29.154.105:1080",
    "66.29.154.103:1080",
    "51.38.191.30:7497",
    "138.94.92.26:7497",
    "66.29.128.246:59487",
    "192.252.220.92:17328",
    "68.71.247.130:4145",
    "68.71.249.153:48606",
    "68.71.254.6:4145",
    "54.37.202.111:30028",
    "184.181.217.210:4145",
    "184.178.172.18:15280",
    "184.181.217.213:4145",
    "72.221.232.152:4145",
    "98.170.57.249:4145",
    "72.206.181.105:64935",
    "174.75.211.222:4145",
    "72.195.34.35:27360",
    "174.64.199.79:4145",
    "72.206.181.123:4145",
    "174.77.111.198:49547",
    "70.166.167.55:57745",
    "98.162.25.16:4145",
    "167.71.171.26:44550",
    "68.71.247.130:4145",
    "98.170.57.249:4145",
    "72.221.164.34:60671",
    "72.210.221.223:4145",
    "174.75.211.222:4145",
    "98.162.96.53:10663",
    "184.181.217.210:4145",
    "72.221.171.130:4145",
    "98.162.25.7:31653",
    "66.42.224.229:41679",
    "51.75.247.54:58374",
    "138.197.66.68:45165",
    "45.91.93.166:37514",
    "98.178.72.21:10919",
    "178.238.25.174:1337",
    "207.180.251.253:53234",
    "64.225.28.9:52700",
    "160.153.254.240:44865",
    "165.22.58.191:42311",
    "159.69.153.169:5566",
    "178.62.227.85:49650",
    "72.195.114.169:4145",
    "192.111.129.145:16894",
    "72.221.171.135:4145",
    "139.162.196.67:20278",
    "75.119.150.125:13070",
    "72.195.34.35:27360",
    "51.83.140.70:8181",
    "72.49.49.11:31034",
    "47.240.226.173:1080",
    "208.102.51.6:58208",
    "72.210.208.101:4145",
    "98.175.31.195:4145",
    "68.71.249.153:48606",
    "192.111.130.5:17002",
    "72.195.114.184:4145",
    "194.146.42.66:7497",
    "72.195.34.42:4145",
    "192.241.232.61:52179",
    "24.249.199.12:4145",
    "174.77.111.197:4145",
    "212.48.152.181:1080",
    "137.184.14.31:60398",
    "184.181.217.194:4145",
    "95.216.174.53:1080",
    "72.210.252.134:46164",
    "103.82.20.182:55445",
    "164.132.67.220:23668",
    "192.252.215.5:16137",
    "135.125.132.213:12168",
    "98.188.47.132:4145",
    "98.162.25.16:4145",
    "184.178.172.23:4145",
    "192.111.139.163:19404",
    "98.162.96.41:4145",
    "185.214.187.104:1080",
    "98.170.57.231:4145",
    "51.83.190.248:19050",
    "31.31.76.178:5566",
    "72.195.34.60:27391",
    "89.22.106.31:11735",
    "72.206.181.103:4145",
    "70.166.167.38:57728",
    "98.162.25.4:31654",
    "31.22.7.188:56981",
    "24.249.199.4:4145",
    "68.71.254.6:4145",
    "159.203.111.0:7497",
    "184.178.172.5:15303",
    "51.222.12.245:10084",
    "51.254.49.255:52407",
    "94.23.4.127:8444",
    "173.230.136.245:16109",
    "178.32.116.99:62763",
    "95.78.119.94:1080",
    "178.255.249.61:1080",
    "8.218.134.238:10802",
    "43.129.207.123:3001",
    "77.220.40.102:1080",
    "98.162.96.52:4145",
    "173.212.206.86:13621",
    "167.172.23.19:45889",
    "72.210.221.197:4145",
    "95.29.80.181:1080",
    "212.103.125.48:1080",
    "184.178.172.25:15291",
    "165.154.92.12:3512",
    "47.243.95.228:10080",
    "88.80.190.32:22001",
    "72.195.34.58:4145",
    "47.242.34.249:33888",
    "5.189.130.207:15861",
    "51.222.13.193:10084",
    "138.201.92.34:1080",
    "37.187.133.177:55566",
    "144.217.7.124:24193",
    "51.68.89.25:58481",
    "72.221.232.152:4145",
    "192.111.137.35:4145",
    "94.130.182.121:5566",
    "65.21.131.83:14141",
    "134.122.14.215:58651",
    "151.80.119.118:1080",
    "178.128.21.134:7497",
    "37.187.133.177:56743",
    "98.188.47.150:4145",
    "51.75.247.54:58057",
    "194.116.72.46:7497",
    "132.148.155.205:33046",
    "104.207.155.10:55410",
    "185.2.100.85:40826",
    "52.74.196.107:38080",
    "64.225.28.9:13982",
    "157.185.173.217:26589",
    "94.130.171.13:63152",
    "157.185.170.32:26589",
    "152.32.143.115:39400",
    "192.99.56.181:51277",
    "88.202.230.103:43378",
    "72.195.34.59:4145",
    "174.77.111.198:49547",
    "212.103.119.24:1080",
    "113.176.118.150:1080",
    "184.178.172.18:15280",
    "64.225.28.9:62909",
    "195.123.210.133:16733",
    "152.32.164.149:42454",
    "192.252.208.67:14287",
    "132.148.16.109:45399",
    "192.111.135.17:18302",
    "95.182.121.73:62134",
    "167.172.23.19:56289",
    "157.185.161.100:26589",
    "15.235.141.35:51921",
    "185.203.243.160:24522",
    "46.241.57.29:1080",
    "70.166.167.55:57745",
    "98.162.25.23:4145",
    "72.221.232.155:4145",
    "174.77.111.196:4145",
    "157.185.178.152:26589",
    "173.82.168.200:17855",
    "13.208.211.148:5000",
    "91.200.115.49:1080",
    "185.8.172.138:1080",
    "104.237.253.120:1080",
    "149.28.100.114:36721",
    "95.182.123.66:62134",
    "139.59.249.213:46422",
    "157.185.168.87:26589",
    "157.230.183.230:12222",
    "15.152.50.23:5000",
    "172.105.97.61:56001",
    "192.169.197.146:55137",
    "13.208.99.150:5000",
    "178.33.171.240:1080",
    "45.142.211.224:10469",
    "77.48.246.114:7497",
    "165.227.104.122:17191",
    "188.166.15.142:54126",
    "178.49.215.7:1080",
    "103.214.112.79:32323",
    "184.178.172.26:4145",
    "178.62.96.17:58279",
    "188.165.230.200:7497",
    "187.210.68.101:7497",
    "51.89.68.78:9050",
    "176.215.78.185:1080",
    "188.165.162.253:7497",
    "37.187.140.148:27546",
    "103.85.232.20:1080",
    "184.181.217.206:4145",
    "72.210.252.137:4145",
    "159.65.116.119:30199",
    "138.197.181.13:7497",
    "51.89.3.130:30444",
    "43.228.125.91:21808",
    "185.86.5.162:8975",
    "188.165.162.254:7497",
    "123.31.12.184:28417",
    "192.111.139.162:4145",
    "212.77.138.119:1080",
    "206.189.15.100:48138",
    "206.189.251.0:21875",
    "37.193.40.16:1080",
    "188.165.162.255:7497",
    "98.162.25.29:31679",
    "167.99.201.165:15956",
    "103.135.248.43:18880",
    "149.202.164.5:59250",
    "188.165.162.252:7497",
    "51.75.247.54:53234",
    "178.62.96.17:28644",
    "209.97.176.112:42193",
    "184.181.217.213:4145",
    "5.130.89.32:1080",
    "51.79.248.215:25693",
    "104.251.224.95:53384",
    "103.110.84.199:7497",
    "167.99.201.165:13020",
    "45.91.93.166:12363",
    "97.74.6.168:30961",
    "95.217.144.183:44965",
    "184.178.172.14:4145",
    "103.127.29.105:7497",
    "185.6.10.141:38929",
    "192.241.129.169:5566",
    "199.192.28.108:7497",
    "182.160.5.234:1080",
    "46.0.205.4:1080",
    "86.106.142.38:7497",
    "138.36.171.244:7497",
    "188.241.45.142:2021",
    "178.62.229.24:63470",
    "202.6.225.92:1080",
    "102.36.127.249:1080",
    "51.210.43.253:7497",
    "158.69.197.113:7497",
    "82.115.19.136:1080",
    "104.131.56.196:7497",
    "207.180.251.253:30819",
    "178.62.238.154:7497",
    "192.169.226.159:60277",
    "8.210.252.121:48091",
    "82.115.18.179:1080",
    "178.62.202.227:7497",
    "103.207.8.130:23804",
    "51.210.5.69:7497",
    "103.80.118.242:51080",
    "128.199.16.89:53989",
    "13.208.74.46:5000",
    "139.180.192.34:9000",
    "184.178.172.3:4145",
    "97.74.230.87:31365",
    "46.32.230.136:7497",
    "143.248.55.62:15566",
    "45.40.161.61:43585",
    "137.184.104.222:33030",
    "43.156.70.173:10081",
    "139.180.146.114:34959",
    "171.244.10.204:42018",
    "192.186.136.44:27923",
    "185.207.107.184:7497",
    "162.243.140.82:30004",
    "77.104.83.15:1080",
    "94.72.61.46:1080",
    "96.45.169.55:8081",
    "18.236.136.178:63999",
    "184.181.217.201:4145",
    "157.230.165.3:7497",
    "5.129.70.128:1080",
    "37.193.46.11:1080",
    "104.131.94.90:51346",
    "51.75.247.54:60736",
    "161.35.125.167:7497",
    "13.213.144.148:38080",
    "94.182.190.241:1080",
    "31.210.52.150:7497",
    "184.178.172.13:15311",
    "43.128.232.105:31993",
    "8.219.75.219:10088",
    "192.186.140.2:11284",
    "104.131.65.174:55178",
    "91.121.210.56:45714",
    "185.110.191.109:1081",
    "194.5.207.180:1080",
    "51.15.112.216:14461",
    "104.238.80.180:39605",
    "166.62.52.254:5138",
    "121.91.230.109:21046",
    "178.128.180.254:7497",
    "95.217.52.14:55445",
    "166.62.52.254:27589",
    "143.198.229.56:60265",
    "184.178.172.28:15294",
    "194.59.171.158:1080",
    "201.222.125.37:7497",
    "64.225.28.168:57457",
    "184.178.172.11:4145",
    "64.225.28.168:38461",
    "152.32.186.145:1080",
    "168.138.162.66:1080",
    "37.152.180.224:44550",
    "66.135.227.178:4145",
    "185.6.10.41:21305",
    "51.68.125.26:7497",
    "178.22.121.196:1080",
    "45.79.71.86:7497",
    "173.249.15.248:51783",
    "44.195.36.104:443",
    "185.237.10.250:20213",
    "72.221.232.155:4145",
    "157.245.1.59:47445",
    "157.90.75.16:7497",
    "138.68.245.25:7497",
    "185.141.106.91:1080",
    "192.169.244.80:21301",
    "136.169.143.75:1080",
    "74.207.251.162:62322",
    "47.243.190.17:8000",
    "51.75.247.54:58568",
    "185.6.10.248:36627",
    "104.238.96.101:31212",
    "54.37.138.158:7497",
    "95.111.246.147:7497",
    "109.220.173.155:4145",
    "178.62.229.24:45603",
    "202.149.89.67:7999",
    "132.148.156.206:64933",
    "157.230.36.225:7497",
    "124.217.251.187:50727",
    "107.172.73.179:7890",
    "165.227.187.48:7497",
    "128.199.79.8:7497",
    "147.182.229.154:7497",
    "161.35.233.210:7497",
    "159.65.94.200:7497",
    "51.178.51.28:7497",
    "209.145.51.228:46438",
    "117.241.128.72:5678",
    "166.62.52.254:9828",
    "149.202.164.5:17562",
    "54.37.156.220:7497",
    "93.115.22.129:7497",
    "51.68.87.157:49320",
    "159.69.43.215:22139",
    "45.77.39.10:64817",
    "184.181.217.220:4145",
    "206.189.131.224:7497",
    "167.172.23.19:13180",
    "45.91.93.166:19713",
    "139.59.231.1:18486",
    "5.181.252.102:7497",
    "91.245.227.59:1080",
    "167.99.76.237:7497",
    "103.169.7.87:6666",
    "103.121.89.75:39267",
    "159.69.117.155:42572",
    "136.243.148.97:25928",
    "103.121.89.159:39267",
    "146.19.191.116:1080",
    "139.162.196.67:60586",
    "149.202.164.5:30154",
    "43.128.46.29:7497",
    "31.41.90.142:1080",
    "149.202.164.5:34793",
    "173.249.31.157:52305",
    "167.99.182.125:26432",
    "192.169.217.153:17228",
    "144.91.107.252:57676",
    "166.62.82.118:26811",
    "185.6.9.176:25288",
    "125.141.139.198:5566",
    "165.227.104.122:32123",
    "54.36.108.221:40305",
    "167.172.23.19:46858",
    "138.68.109.12:54034",
    "67.205.2.160:64118",
    "149.202.164.5:30117",
    "51.38.177.96:7497",
    "143.198.152.50:12345",
    "45.77.39.10:23760",
    "147.182.203.142:12345",
    "46.52.135.119:1080",
    "212.83.188.116:61252",
    "45.142.182.99:1080",
    "149.202.164.5:35264",
    "51.83.133.132:62638",
    "176.88.177.197:61080",
    "103.47.253.58:35076",
    "134.209.105.160:19101",
    "1.179.220.211:7497",
    "35.222.120.139:8000",
    "8.219.179.234:10088",
    "95.68.224.188:1080",
    "37.187.73.136:56137",
    "103.196.136.158:7497",
    "157.245.157.72:60490",
    "37.187.133.177:55894",
    "72.167.55.195:28426",
    "195.154.39.179:45675",
    "91.121.210.56:7740",
    "45.118.145.52:10308",
    "185.2.100.85:42292",
    "134.209.100.103:47307",
    "195.201.225.104:23224",
    "128.199.125.165:43176",
    "51.210.249.202:51056",
    "149.202.164.5:41580",
    "165.227.141.215:13019",
    "157.245.247.84:7497",
    "195.201.225.104:46688",
    "111.90.158.144:19963",
    "91.121.210.56:27542",
    "51.68.94.167:47159",
    "34.94.46.218:8000",
    "139.180.146.114:46555",
    "142.93.162.127:28860",
    "37.187.140.148:10766",
    "50.63.13.228:11213",
    "130.185.121.228:50002",
    "184.95.235.194:1080",
    "54.38.72.186:61053",
    "85.15.65.70:1080",
    "192.248.190.249:12916",
    "178.128.21.246:20425",
    "85.214.94.105:12126",
    "51.210.21.189:1080",
    "46.101.99.250:56632",
    "167.99.182.125:24444",
    "95.216.196.32:61221",
    "31.43.203.100:1080",
    "134.209.111.155:7497",
    "142.93.167.100:61042",
    "103.82.20.108:51980",
    "149.202.164.5:25892",
    "188.120.248.106:7497",
    "45.77.194.89:5760",
    "37.44.238.2:63617",
    "54.38.242.224:57967",
    "165.154.75.108:3512",
    "173.249.2.186:45708",
    "159.203.232.102:1139",
    "147.182.228.141:12345",
    "5.130.185.31:10801",
    "37.131.202.95:33427",
    "45.77.194.89:63249",
    "187.63.9.38:63253",
    "185.6.10.41:28150",
    "195.201.225.104:12085",
    "206.189.200.62:13110",
    "89.22.113.189:50563",
    "185.32.120.242:1080",
    "159.65.242.254:7497",
    "95.68.225.138:1080",
    "129.154.54.211:40091",
    "94.23.147.123:8444",
    "138.201.140.125:15976",
    "134.209.105.160:60064",
    "185.162.95.125:10001",
    "184.178.172.17:4145",
    "35.244.6.175:1080",
    "210.211.122.40:33685",
    "202.92.4.113:35528",
    "80.150.190.116:1080",
    "51.178.140.65:7497",
    "142.11.213.94:7497",
    "51.255.219.244:7497",
    "138.201.140.90:15976",
    "192.169.197.17:45364",
    "157.245.77.149:18581",
    "54.38.242.224:31143",
    "91.122.226.13:1080",
    "165.227.139.174:53913",
    "188.165.231.180:59135",
    "51.89.116.108:60701",
    "167.99.12.224:49463",
    "193.169.4.184:10801",
    "51.79.51.174:10328",
    "157.245.77.149:11303",
    "51.68.123.217:7497",
    "87.255.240.213:1080",
    "91.121.210.56:27120",
    "134.209.105.160:31433",
    "143.198.69.18:12345",
    "95.104.194.240:1080",
    "74.208.65.165:14548",
    "135.125.30.135:42625",
    "192.169.197.17:33816",
    "161.35.229.155:38931",
    "178.32.108.118:1080",
    "193.105.124.46:1080",
    "8.219.91.40:10088",
    "81.143.236.200:443",
    "134.209.105.160:47322",
    "46.147.194.197:1080",
    "195.149.196.135:1080",
    "178.62.229.24:15401",
    "95.216.181.107:9080",
    "31.28.8.109:1080",
    "45.55.196.194:60743",
    "103.75.184.179:55448",
    "129.146.18.152:20000",
    "144.126.217.189:12345",
    "134.209.105.160:47378",
    "138.201.243.84:1080",
    "193.203.61.35:8443",
    "134.209.23.68:22773",
    "192.248.190.249:37262",
    "137.184.14.31:33887",
    "43.240.113.89:46859",
    "188.165.231.180:55654",
    "139.59.68.143:48922",
    "138.68.190.172:43130",
    "161.97.158.118:11944",
    "146.56.138.62:17601",
    "142.93.113.81:7497",
    "166.62.52.254:11557",
    "54.173.11.208:1080",
]


def get_random_proxy() -> Dict[str, str]:
    proxy = choice(list_of_proxies)
    return {"http": f"socks5://{proxy}", "https": f"socks5://{proxy}"}


def delete_proxy(proxy: Dict[str, str]):
    p = proxy["http"].replace("socks5://", "")
    list_of_proxies.remove(p)


def try_to_make_get(*args, **kwargs):
    while True:
        proxy = get_random_proxy()
        try:
            r = requests.get(*args, proxies=proxy, verify=False, timeout=5, **kwargs)
        except Exception as e:
            delete_proxy(proxy)
            print(f"Exception {e} caused deletion of proxy: {proxy}, left: {len(list_of_proxies)}")
            continue
        return r
